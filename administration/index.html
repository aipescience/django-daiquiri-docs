<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Administration - Daiquiri documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../style.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Administration";
    var mkdocs_page_input_path = "administration.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Daiquiri documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deployment/">Deployment</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../settings/">Settings</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Administration</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#administration">Administration</a></li>
    

    <li class="toctree-l2"><a href="#admin-interface">Admin interface</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#site-configuration">Site configuration</a></li>
        
            <li><a class="toctree-l3" href="#users-and-groups">Users and Groups</a></li>
        
            <li><a class="toctree-l3" href="#social-accounts">Social accounts</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#command-line-tools">Command line tools</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#setup-tap_schema">Setup TAP_SCHEMA</a></li>
        
            <li><a class="toctree-l3" href="#rebuild-tap_schema">Rebuild TAP_SCHEMA</a></li>
        
            <li><a class="toctree-l3" href="#rebuild-oai-schema">Rebuild OAI Schema</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../management/">Management</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../advanced/">Advanced features</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Daiquiri documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Administration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="administration">Administration</h2>
<h2 id="admin-interface">Admin interface</h2>
<p>Daiquiri uses the <a href="https://docs.djangoproject.com/en/2.2/ref/contrib/admin/">Django Admin interfaca</a> as an interface for admins to intereact with a particular Daiquiri site. Please refer to the Django documentation for a detailed guide. Here we summarize the most important options:</p>
<h4 id="site-configuration">Site configuration</h4>
<p>Daiquiri uses Django&rsquo;s <a href="https://docs.djangoproject.com/en/stable/ref/contrib/sites">sites framework</a>. It is therefore necesary to configure the <strong>Domain name</strong> and the <strong>Display name</strong> of your RDMO installation. This can be done in the admin interface under <em>SITE</em>.</p>
<h4 id="users-and-groups">Users and Groups</h4>
<p>The users and groups of your Daiquiri site can be managed under <strong>AUTHENTICATION AND AUTHORIZATION</strong>. You can create and update users and set their password directly, but most of the time this will be done by the users themselves using the account menu.</p>
<p>The user created in the installation process can access all features of Daiquiri. In order to allow other users to access the management or the admin interface, they need to have the required permissions assigned to them. This can be done in two ways: through groups or using the superuser flag.</p>
<h4 id="social-accounts">Social accounts</h4>
<p>Using the <a href="https://www.intenct.nl/projects/django-allauth/">django-allauth</a>, social authentication using the OAuth2 protocol can be used with Daiquiri. For this <code>'allauth.socialaccount'</code> and, e.g. for GitHub, <code>'allauth.socialaccount.providers.github'</code> need to be added to <code>INSTALLED_APPS</code> in <code>base.py</code>. In addition, your app needs to be registered with the provider. The callback url needed for the registration is</p>
<pre><code>&lt;site url&gt;/account/&lt;provider&gt;/login/callback/
</code></pre>

<p>Once the credentials are obtained, you need to enter them in the admin interface under SOCIAL ACCOUNTS. Click on Add social application and:</p>
<ol>
<li>Select the corresponding provider</li>
<li>Enter a Name of your choice</li>
<li>Enter the Client id (or App ID) and the Secret key (or Client secret, Client key, App Secret)</li>
<li>Add your site to the chosen sites.</li>
<li>Click save.</li>
</ol>
<h2 id="command-line-tools">Command line tools</h2>
<p>In addition the web interface, Daiquiri provides several commands to inter, which can be</p>
<h4 id="setup-tap_schema">Setup TAP_SCHEMA</h4>
<p>In order to setup the metadata for the TAP_SCHEMA run the following command (in your virtual environment):</p>
<pre><code class="bash">python manage.py setup_tap_metadata
</code></pre>

<p>After this, <em>/metadata/management/</em> should show a schema entry for the <code>tap_schema</code>.</p>
<h4 id="rebuild-tap_schema">Rebuild TAP_SCHEMA</h4>
<p>The metadata is automatically synced between the metadata and the the TAP_SCHEMA. In order to rebuild the TAP_SCHEMA from scratch, you can use:</p>
<pre><code class="bash">python manage.py rebuild_tap_schema
</code></pre>

<h4 id="rebuild-oai-schema">Rebuild OAI Schema</h4>
<p>Similar to the TAP_SCHEMA, the records for the OAI-PMH interface are located in a seperate schema, whithin the scientific database. In order to create the <code>oai_schema</code> from scratch, use:</p>
<pre><code class="bash">python manage.py rebuild_oai_schema
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../management/" class="btn btn-neutral float-right" title="Management">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../settings/" class="btn btn-neutral" title="Settings"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../settings/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../management/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
